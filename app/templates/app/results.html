{% extends "app/base.html" %}

{% block title %}Results{% endblock %}

{% block main %}
<div class="row">
    <div class="col-lg-8 col-lg-offset-2">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Poll Result</h3>
            </div>

            <div class="panel-body">
                <h3>{{poll.question}}</h3>
            </div>

            <ul class="list-group">
                <li class="list-group-item">{{poll.option_one}} &mdash; <strong>{{poll.option_one_count}}</strong></li>
                <li class="list-group-item">{{poll.option_two}} &mdash; <strong>{{poll.option_two_count}}</strong></li>
                <li class="list-group-item">{{poll.option_three}} &mdash; <strong>{{poll.option_three_count}}</strong></li>
            </ul>

            <div class="panel-footer">
                Total &mdash; <strong>{{poll.total}}</strong>
            </div>

            <div>
                <canvas id="myChart"></canvas>
              </div>

        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
    const ctx = document.getElementById('myChart');
  
    new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['Total : {{poll.total}}'],
          datasets: [{
            label: '{{poll.option_one}}',
            data: [{{poll.option_one_count}}],
            backgroundColor: [
              'rgba(255, 99, 132, 0.2)'
            ],
            borderColor: [
              'rgba(255, 99, 132, 1)'
            ],
            borderWidth: 1
          },
          {
            label: '{{poll.option_two}}',
            data: [{{poll.option_two_count}}],
            backgroundColor: [
              'rgba(54, 162, 235, 0.2)'
            ],
            borderColor: [
              'rgba(54, 162, 235, 1)'
            ],
            borderWidth: 1
          },
          {
            label: '{{poll.option_three}}',
            data: [{{poll.option_three_count}}],
            backgroundColor: [
              'rgba(255, 206, 86, 0.2)'
            ],
            borderColor: [
              'rgba(255, 206, 86, 1)'
            ],
            borderWidth: 1
          }]
        },
        options: {
            scales: {
              y: {
                type: 'linear',
                display: true,
                position: 'left',
                beginAtZero: true,
                ticks: {
                  precision: 0,
                  stepSize: 1
                }
              }
            }
          }
        });
</script>

  

{% endblock %}

